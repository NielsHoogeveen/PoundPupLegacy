@*@inherits EditorBase*@
@using PoundPupLegacy.EditModel.UI.Services.Implementation
@typeparam TCreateModel where TCreateModel: class, ResolvedNewNode
@typeparam TUpdateModel where TUpdateModel: class, ExistingNode
@inject IJSRuntime JSRuntime
@inject IEditService2<TCreateModel, TUpdateModel> editService

@code {
    [Parameter]
    [EditorRequired]
    public Node<TUpdateModel, TCreateModel> Model { get; set; } = default!;

    public async Task Save()
    {
        await Model.Match(
            async update => await editService.SaveAsync(update), 
            async create => await editService.SaveAsync(create)
        );
    }
}

