@*@inherits EditorBase*@
@using PoundPupLegacy.EditModel.UI.Services.Implementation
@typeparam TEditModel where TEditModel: class, Node, Node<TUpdateModel, TCreateModel>
@typeparam TCreateModel where TCreateModel: class, TEditModel, ResolvedNewNode
@typeparam TUpdateModel where TUpdateModel: class, TEditModel, ExistingNode
@inject IJSRuntime JSRuntime
@inject IEditService2<TEditModel, TCreateModel, TUpdateModel> editService

@code {
    [Parameter]
    [EditorRequired]
    public TEditModel Model { get; set; } = default!;

    public async Task Save()
    {
        await Model.Match(
            async update => await editService.SaveAsync(update), 
            async create => await editService.SaveAsync(create)
        );
    }
}

