@using Microsoft.Extensions.Primitives
@inherits PagedSearchViewer<TopicListEntry>
@inject IFetchTopicsService TopicService
<HeadContentSetter Title=@Title SiteName=@SiteName Description=@Description />
<BreadCrumElementViewer Model="BreadCrumElements" />
<SearchForm PagedSearchListSettings="PagedListSettings" OnSearch="OnSearch" />
<EntityListEntriesViewer 
    ListEntries="ListEntries" 
    PagedListSettings="PagedListSettings" 
    SelectPage="SelectPage"
    ElementsName="topics"/>

@code {

    protected override int PageSize => 50;

    protected override string Title => $"Topics";

    protected override string Description => "List of all topics";


    protected override void SetPagedListSettings(Dictionary<string, StringValues> parsedQuery)
    {

    }


    protected override async Task<IPagedList<TopicListEntry>> GetListEntriesAsync()
    {
        return await TopicService.FetchTopics(
            userId: User.Id, 
            tenantId: Tenant.Id, 
            pageSize: PagedListSettings.PageSize, 
            pageNumber: PagedListSettings.PageNumber, 
            searchTerm: PagedListSettings.SearchTerm, 
            searchOption: PagedListSettings.SearchOption);
    }
}
