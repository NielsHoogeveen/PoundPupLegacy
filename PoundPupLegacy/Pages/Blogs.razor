@page "/blogs"
@using PoundPupLegacy.Services
@using PoundPupLegacy.ViewModel.Models
@using PoundPupLegacy.Components
@inherits Page
@inject IFetchBlogsService fetchBlogsService

@if (CanAccessPage)
{
    @if (blogs.Any())
    {
        <BlogsViewer Model="@blogs" />
    }

}
else {
    <NoAccess/>
}

@code{
    private List<BlogListEntry> blogs = new List<BlogListEntry>();

    protected override async Task OnInitializedPageAsync()
    {
        blogs = await fetchBlogsService.FetchBlogs(TenantId);
    }
}
