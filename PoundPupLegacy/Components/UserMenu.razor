@using PoundPupLegacy.Models
@using PoundPupLegacy.Services
@inherits ViewerBase
@inject ISiteDataService SiteDataService

<nav>
    <ul>
        <li>
            <a href="/">
                Home
            </a>
        </li>
        @foreach (var item in _menuItems) 
        {
            <LinkListElementViewer Link="@item" />
        }
        @if (UserId != 0) {
            <li>
                <LogoutForm />
            </li>
        }
        else {
            <li>
                <LoginForm />
            </li>
        }
    </ul>
</nav>


@code {
    private IEnumerable<MenuItem> _menuItems = Array.Empty<MenuItem>();

    protected override void OnInitialized()
    {

        _menuItems = SiteDataService.GetMenuItemsForUser(
            userId: UserId, 
            tenantId: TenantId);
    }
}
