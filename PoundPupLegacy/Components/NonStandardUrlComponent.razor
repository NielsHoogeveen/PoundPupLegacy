@inherits ViewerBase
@using PoundPupLegacy.Services
@using PoundPupLegacy.ViewModel.Models
@using PoundPupLegacy.ViewModel.UI.Services
@inject INodeService NodeService
@inject NavigationManager NavigationManager
@if (notFound) {
    <NotFound />
}

@code {


    private bool notFound = false;

    protected override async Task OnInitializedAsync()
    {
        var urlPath = new Uri(NavigationManager.Uri).AbsolutePath;
        if(urlPath[1..].Contains('/')){ // if the url contains a slash, it's not a node url
            notFound = true;
            return;
        }
        var path = await NodeService.GetRedirectPath(urlPath, Tenant.Id);
        if(path != null)
        {
            NavigationManager.NavigateTo(path, true);
            return;
        }
        notFound = true;
    }
}