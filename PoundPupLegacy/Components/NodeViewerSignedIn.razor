@using PoundPupLegacy.ViewModel
@using PoundPupLegacy.Services
@inject ISiteDataService siteDataService
@if(Model is not null)
{
    var ModelClassName = Model.HasBeenPublished ? "node" : "node node-unpublished";

    <div class="article-with-comments @ModelClassName">


        @if (siteDataService.CanEdit(Model))
        {
            <style>
                input.tab-button {
                    display: none;
                }
                    /* hide radio buttons */
                    input + label {
                        display: inline-block
                    }
                    /* show labels in line */
                    input ~ .tab {
                        display: none
                    }
                /* hide contents */
                /* show contents only for selected tab */
                #tab1:checked ~ .tab.content1,
                #tab2:checked ~ .tab.content2 {
                    display: block;
                    padding: 0;
                }

                input.tab-button + label { /* box with rounded corner */
                    border: 1px solid #999;
                    background: #EEE;
                    padding: 4px 12px;
                    border-radius: 4px 4px 0 0;
                    position: relative;
                    top: 1px;
                }

                input.tab-button:checked + label { /* white background for selected tab */
                    background: #FFF;
                    border-bottom: 1px solid transparent;
                }

                input.tab-button ~ .tab { /* grey line between tab and contents */
                    border-top: 1px solid #999;
                    padding: 12px;
                }
            </style>
            <input class="tab-button" type="radio" name="tabs" id="tab1" checked />
            <label for="tab1">View</label>
            <input class="tab-button" type="radio" name="tabs" id="tab2" />
            <label for="tab2">Edit</label>
        }   
        <div class=" tab content1">
            <NodeContentViewer Model="Model" />
        </div>
    
        @if (siteDataService.CanEdit(Model))
        {
            <div class="tab content2">
                <article>
                @if (Model is BlogPost)
                {
                    <BlogPostEditor Id="Model.Id" />
                }
                @if (Model is Article) 
                {
                    <ArticleEditor Id="Model.Id" />
                }
                @if (Model is Discussion) 
                {
                    <DiscussionEditor Id="Model.Id" />
                }
                @if (Model is Document) 
                {
                    <DocumentEditor Id="Model.Id" />
                }
                </article>
            </div>
        }
        <CommentsViewer Model="Model.Comments"/>
    </div>

}
@code{
    [Parameter]
    public Node? Model { get; set; }
}
