@using PoundPupLegacy.Models
<div>
    <LargeTextViewer Value="@DisplayText" />
    @if(Model.Text.Length > MaxLength)
    {
        <div class="collapse-button" @onclick="() => Collapsed = !Collapsed">@ButtonText</div>
    }    
</div>

@code {
    [Parameter]
    [EditorRequired]
    public ChatMessage Model { get; set; } = default!;

    private bool Collapsed = true;

    const int MaxLength = 100;

    public string DisplayText => Collapsed
        ? Model.Text.Substring(0, Math.Min(Model.Text.Length, MaxLength)) 
        : Model.Text;

    public string ButtonText => Collapsed ? "Show more" : "Show less";
}
