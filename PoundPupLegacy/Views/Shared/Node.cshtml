@using PoundPupLegacy.ViewModel;
@using PoundPupLegacy.Services;
@using PoundPupLegacy.Components;
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@model Node
@inject ISiteDataService siteDataService
@inject IUserService userService
@{
    var userId = userService.GetUserId(Context.User);
    var tenantId = siteDataService.GetTenantId(Context.Request);
}
@if (Context.User.Identity is not null && Context.User.Identity.IsAuthenticated) 
{
    <component type="typeof(NodeViewerSignedIn)"
            render-mode="ServerPrerendered" param-Model="@Model" param-UserId="@userId" param-TenantId="@tenantId"/>
}
else 
{
    <component type="typeof(NodeViewerNotSignedIn)"
           render-mode="ServerPrerendered" param-Model="@Model" />
}
@{
    Layout = siteDataService.GetLayout(userId, tenantId);
}

